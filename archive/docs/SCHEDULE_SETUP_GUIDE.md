# schedule.py セットアップガイド（マルチユーザー環境対応）

## マルチユーザー環境での動作

### ✅ 別のユーザーに切り替えている場合

**実行されます**

- Pythonスクリプトを実行しているユーザーがログオフしていない限り、別のユーザーに切り替えていても自動投稿は実行されます
- ユーザーのセッションは「ロック」された状態になりますが、バックグラウンドプロセスは動作し続けます

### ❌ ユーザーが完全にログオフした場合

**実行されません**

- ユーザーが完全にログオフした場合、そのユーザーのプロセスは停止します
- 自動投稿を継続するには、ユーザーをログオフしないでください

## セットアップ手順

### ステップ1: 依存パッケージのインストール

```powershell
cd C:\Users\kazz17\.cursor\blog-to-twitter-bot-temp
python -m pip install -r requirements.txt
```

### ステップ2: .envファイルの確認

`.env`ファイルに両方のアカウントの認証情報が設定されていることを確認してください。

### ステップ3: スケジューラーの起動

#### 方法1: 両方を同時に実行（推奨）

**PowerShellで実行:**

```powershell
cd C:\Users\kazz17\.cursor\blog-to-twitter-bot-temp

# 365botGaryをバックグラウンドで実行
Start-Process python -ArgumentList "schedule_365bot.py" -WindowStyle Hidden

# pursahsgospelをバックグラウンドで実行
Start-Process python -ArgumentList "schedule_pursahs.py" -WindowStyle Hidden
```

#### 方法2: 個別に実行

**365botGaryのみ:**
```powershell
python schedule_365bot.py
```

**pursahsgospelのみ:**
```powershell
python schedule_pursahs.py
```

## 実行スケジュール

両方のスケジューラーは以下の時間に実行されます：

- **8時**: 8:00～8:59のランダムな時間
- **14時**: 14:00～14:59のランダムな時間
- **20時**: 20:00～20:59のランダムな時間

各時間帯でランダムな分が選ばれます（例: 8:23、14:47、20:15など）。

## 動作確認

### プロセスの確認

```powershell
# Pythonプロセスを確認
Get-Process python | Where-Object {$_.Path -like "*blog-to-twitter-bot*"}

# または、タスクマネージャーで確認
# 「プロセス」タブで「python.exe」を探す
```

### ログの確認

**365botGary:**
- コンソール出力を確認
- または、ログファイルがあれば確認

**pursahsgospel:**
- コンソール出力を確認
- または、ログファイルがあれば確認

## 停止方法

### 方法1: タスクマネージャーで停止

1. タスクマネージャーを開く
2. 「プロセス」タブで「python.exe」を探す
3. 該当するプロセスを選択して「タスクの終了」をクリック

### 方法2: PowerShellで停止

```powershell
# 365botGaryのプロセスを停止
Get-Process python | Where-Object {$_.CommandLine -like "*schedule_365bot*"} | Stop-Process

# pursahsgospelのプロセスを停止
Get-Process python | Where-Object {$_.CommandLine -like "*schedule_pursahs*"} | Stop-Process
```

## 注意事項

### PCを常時起動しておく必要がある

- **PCが起動している必要があります**
- PCをスリープやシャットダウンすると実行されません
- ノートPCの場合は、電源に接続しておくことを推奨

### 電源設定の推奨設定

1. **スリープを無効化**
   - コントロールパネル → 電源オプション → スリープ設定
   - 「スリープ」を「なし」に設定

2. **ディスプレイの電源を切るだけにする**
   - ディスプレイの電源は切っても問題ありません
   - PC本体は起動したままにしておく

### ユーザーをログオフしない

- 別のユーザーに切り替えるのは問題ありません
- ただし、Pythonスクリプトを実行しているユーザーを完全にログオフすると、プロセスが停止します

## トラブルシューティング

### プロセスが実行されていない

1. タスクマネージャーでPythonプロセスを確認
2. 実行されていない場合は、再度起動してください

### 投稿が実行されない

1. ログを確認してエラーがないか確認
2. `.env`ファイルの認証情報を確認
3. PCがスリープ状態になっていないか確認

### 別のユーザーに切り替えた後、投稿が実行されない

- ユーザーが完全にログオフしていないか確認
- タスクマネージャーでPythonプロセスが実行中か確認

## まとめ

| 状況 | 自動投稿の実行 |
|------|--------------|
| 別のユーザーに切り替え | ✅ 実行される |
| ユーザーがログオフ | ❌ 実行されない |
| PCがスリープ | ❌ 実行されない |
| PCがシャットダウン | ❌ 実行されない |

**重要なポイント:**
- 別のユーザーに切り替えていても実行されます（ユーザーがログオフしていない限り）
- PCを常時起動しておく必要があります
- ユーザーをログオフしないでください










