"""
成功時のコード（Git履歴1bf2776）と現在のコードを比較
"""
import sys
import io

# Windowsでの文字化け対策
sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')

print("=" * 80)
print("create_tweet呼び出しの比較: Git履歴（1bf2776）vs 現在")
print("=" * 80)
print()

print("[Git履歴のコード（1bf2776）]")
print("-" * 80)
print("クライアント初期化:")
print("  wait_on_rate_limit=True")
print()
print("create_tweet呼び出し:")
print("  response = self.client.create_tweet(text=text)")
print()
print("エラーハンドリング:")
print("  except tweepy.TooManyRequests as e:")
print("      logger.error(...)")
print("      return None  # シンプル")
print()

print("[現在のコード]")
print("-" * 80)
print("クライアント初期化:")
print("  wait_on_rate_limit=False  # レート制限時はエラーを返す（手動で処理）")
print()
print("create_tweet呼び出し:")
print("  response = self.client.create_tweet(text=text)")
print()
print("エラーハンドリング:")
print("  except tweepy.TooManyRequests as e:")
print("      logger.error(...)")
print("      # レート制限の情報を記録")
print("      record_rate_limit_reason(...)")
print("      return None")
print()

print("[主な違い]")
print("-" * 80)
print("1. wait_on_rate_limitパラメータ")
print("   - Git履歴（1bf2776）: wait_on_rate_limit=True")
print("   - 現在: wait_on_rate_limit=False")
print("   → これが重要な違いかもしれません")
print()
print("2. エラーハンドリング")
print("   - Git履歴（1bf2776）: シンプル（ログ出力してreturn None）")
print("   - 現在: 詳細（レート制限情報を記録）")
print()
print("3. __init__メソッド")
print("   - Git履歴（1bf2776）: account_key, account_nameパラメータなし")
print("   - 現在: account_key, account_nameパラメータあり")
print()

print("[create_tweetの呼び出し方法]")
print("-" * 80)
print("両方とも同じ:")
print("  response = self.client.create_tweet(text=text)")
print()

print("=" * 80)
print()
print("結論:")
print("create_tweetの呼び出し方法自体は同じですが、")
print("wait_on_rate_limitパラメータが異なります。")
print()
print("Git履歴: wait_on_rate_limit=True  → レート制限時に自動待機")
print("現在:    wait_on_rate_limit=False → レート制限時にエラーを返す")
print()
print("ただし、ユーザーは「gitで成功したことはない」と言っているので、")
print("成功時のコードはGit履歴とは関係ない可能性があります。")
print()
print("=" * 80)

